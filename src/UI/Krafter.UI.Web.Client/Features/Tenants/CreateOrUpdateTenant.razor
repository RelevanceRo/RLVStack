@using Krafter.Api.Client.Models
@using Krafter.UI.Web.Client.Features.Tenants
@using Krafter.UI.Web.Client.Common.Components.DaisyUI

<form @onsubmit="Submit" class="space-y-4">
    <FluentValidationValidator Options="@(options => options.IncludeAllRuleSets())"/>

    <!-- Name Field -->
    <div class="grid grid-cols-12 gap-4 items-center">
        <div class="col-span-12 md:col-span-2">
            <RlvLabel Text="Name" For="Name"/>
        </div>
        <div class="col-span-12 md:col-span-10">
            <RlvInputField @bind-Value="@CreateRequest.Name" Placeholder="Enter tenant name" Type="text" class="w-full"/>
            <ValidationMessage class="text-sm text-error" For="@(() => CreateRequest.Name)"/>
        </div>
    </div>

    <!-- Identifier Field -->
    <div class="grid grid-cols-12 gap-4 items-center">
        <div class="col-span-12 md:col-span-2">
            <RlvLabel Text="Identifier" For="Identifier"/>
        </div>
        <div class="col-span-12 md:col-span-10">
            <RlvInputField @bind-Value="@CreateRequest.Identifier" Placeholder="Enter identifier" Type="text" class="w-full"/>
            <ValidationMessage class="text-sm text-error" For="@(() => CreateRequest.Identifier)"/>
        </div>
    </div>

    <!-- Admin Email Field -->
    <div class="grid grid-cols-12 gap-4 items-center">
        <div class="col-span-12 md:col-span-2">
            <RlvLabel Text="Admin Email" For="AdminEmail"/>
        </div>
        <div class="col-span-12 md:col-span-10">
            <RlvInputField @bind-Value="@CreateRequest.AdminEmail" Placeholder="Enter admin email" Type="email" class="w-full"/>
            <ValidationMessage class="text-sm text-error" For="@(() => CreateRequest.AdminEmail)"/>
        </div>
    </div>

    <!-- Valid Upto Field -->
    <div class="grid grid-cols-12 gap-4 items-center">
        <div class="col-span-12 md:col-span-2">
            <RlvLabel Text="Valid Upto" For="ValidUpto"/>
        </div>
        <div class="col-span-12 md:col-span-10">
            <InputDate @bind-Value="@ValidUptoDate" class="input input-bordered w-full"/>
            <ValidationMessage class="text-sm text-error" For="@(() => CreateRequest.ValidUpto)"/>
        </div>
    </div>

    <!-- Tables To Copy (only for new tenants) -->
    @if (string.IsNullOrWhiteSpace(CreateRequest.Id))
    {
        <div class="grid grid-cols-12 gap-4 items-center">
            <div class="col-span-12 md:col-span-2">
                <RlvLabel Text="Tables To Copy" For="TablesToCopyList"/>
            </div>
            <div class="col-span-12 md:col-span-10">
                <select multiple @bind="SelectedTables"
                        class="select select-bordered w-full max-h-48 overflow-y-auto">
                    @foreach (var table in TablesToCopyList)
                    {
                        <option value="@table.Name">@table.DisplayName</option>
                    }
                </select>
                <p class="text-sm text-base-content/70 mt-1">Hold Ctrl/Cmd to select multiple tables</p>
            </div>
        </div>
    }

    <!-- Is Active Checkbox -->
    <div class="grid grid-cols-12 gap-4 items-center">
        <div class="col-span-12 md:col-span-2">
            <RlvLabel Text="Is Active" For="IsActive"/>
        </div>
        <div class="col-span-12 md:col-span-10">
            <input type="checkbox" @bind="CreateRequest.IsActive" class="checkbox checkbox-primary"/>
            <ValidationMessage class="text-sm text-error" For="@(() => CreateRequest.IsActive)"/>
        </div>
    </div>

    <!-- Form Actions -->
    <div class="flex flex-row justify-center gap-4 mt-8 mb-4">
        <RlvButton Type="ButtonType.Submit" Color="ButtonColor.Primary" Size="ButtonSize.Medium" Disabled="@isBusy">
            @if (isBusy)
            {
                <RlvLoading Size="LoadingSize.Small" class="mr-2"/>
            }
            <span>Save</span>
        </RlvButton>
        <RlvButton Color="ButtonColor.Neutral" Variant="ButtonVariant.Ghost" Size="ButtonSize.Medium" OnClick="@Cancel">
            Cancel
        </RlvButton>
    </div>
</form>
