@using Krafter.Api.Client.Models
@using Krafter.UI.Web.Client.Features.Users._Shared
@using Krafter.UI.Web.Client.Features.Users._Shared
<RadzenDropDownDataGrid Name="UsersDropDown" Style="width: 100%;" @ref="dropDownGrid" AllowSelectAll="false" IsLoading="IsLoading" Density="LocalAppSate.Density" PageSize="GetRequestInput.MaxResultCount" Multiple=true AllowClear="true" @bind-Value=@ValueEnumerable Change="@((arg) => OnValueChanged(arg))"
                        LoadData=@LoadProcesses AllowFiltering="true"
                        Data=@Data Count="@(GetCount())" TextProperty="FirstName"  ValueProperty="Id" Placeholder="Select Users" Chips=true>

    <Columns>

        <RadzenDropDownDataGridColumn Width="60px" Sortable="false">
            <HeaderTemplate>
                <RadzenCheckBox  Disabled="@(!dropDownGrid.AllowSelectAll)" TriState="false" TValue="bool" Value="@(Data != null && Data.Any(c => ValueEnumerable != null && ValueEnumerable.Contains(c.Id)))"
                                 Change="@(args => ValueEnumerable = args ? dropDownGrid.View.Cast<UserDto>().Select(c => c.Id) : ValueEnumerable = Enumerable.Empty<string>())"/>
            </HeaderTemplate>
            <Template Context="data">
                <RadzenCheckBox  TriState="false" Value="@(ValueEnumerable != null && ValueEnumerable.Contains(((UserDto)data).Id))"
                                 TValue="bool" Change=@(_ => dropDownGrid.SelectItem(data)) @onclick:stopPropagation/>
            </Template>
        </RadzenDropDownDataGridColumn>

        <RadzenDropDownDataGridColumn Property="FirstName" Title="FirstName" Width="80px"/>
        <RadzenDropDownDataGridColumn Property="LastName" Title="LastName" Width="200px"/>
       
    </Columns>
</RadzenDropDownDataGrid>